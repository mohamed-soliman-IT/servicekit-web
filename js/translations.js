const translations = {
    "en": {
        "nav": {
            "services": "Services",
            "howItWorks": "How It Works",
            "courses": "Courses",
            "about": "About"
        },
        "hero": {
            "title": "Connect with Professional Technicians",
            "subtitle": "Find skilled professionals for all your service needs",
            "findProfessional": "Find a Professional",
            "becomeTechnician": "Become a Technician"
        },
        "services": {
            "title": "Our Services",
            "subtitle": "Professional services for all your needs",
            "carpentry": {
                "title": "Carpentry",
                "description": "Expert woodworking and furniture making services",
                "features": [
                    "Custom furniture design",
                    "Wood repairs and restoration",
                    "Installation services"
                ]
            },
            "plumbing": {
                "title": "Plumbing",
                "description": "Professional plumbing and pipe installation",
                "features": [
                    "Pipe installation and repair",
                    "Drain cleaning",
                    "Water heater services"
                ]
            },
            "electrical": {
                "title": "Electrical",
                "description": "Safe and reliable electrical services",
                "features": [
                    "Electrical repairs",
                    "Installation services",
                    "Safety inspections"
                ]
            },
            "mechanical": {
                "title": "Mechanical",
                "description": "Precision mechanical repairs and maintenance",
                "features": [
                    "Equipment maintenance",
                    "Repair services",
                    "Installation support"
                ]
            }
        },
        "app": {
            "android": "Android",
            "ios": "iOS"
        },
        "courses": {
            "title": "Professional Courses",
            "subtitle": "Enhance your skills with our expert-led training programs",
            "levels": {
                "beginner": "Beginner",
                "intermediate": "Intermediate",
                "advanced": "Advanced",
                "expert": "Expert"
            },
            "details": {
                "weeks": " weeks",
                "students": " students"
            },
            "enroll": "Enroll Now",
            "items": {
                "carpentry": {
                    "title": "Modern Carpentry",
                    "description": "Learn essential woodworking skills and techniques for creating beautiful, functional pieces."
                },
                "plumbing": {
                    "title": "Professional Plumbing",
                    "description": "Master plumbing installation, repair, and maintenance techniques for residential and commercial properties."
                },
                "electrical": {
                    "title": "Electrical Systems",
                    "description": "Comprehensive training in electrical installation, safety protocols, and system maintenance."
                },
                "mechanical": {
                    "title": "Mechanical Engineering",
                    "description": "Advanced training in mechanical systems, equipment maintenance, and industrial applications."
                }
            },
            "modal": {
                "title": "Download Our App",
                "subtitle": "Get access to all courses on the go",
                "android": {
                    "small": "GET IT ON",
                    "large": "Google Play"
                },
                "ios": {
                    "small": "Download on the",
                    "large": "App Store"
                }
            }
        },
        "howItWorks": {
            "title": "How It Works",
            "subtitle": "Simple steps to get the service you need",
            "steps": {
                "requestService": {
                    "title": "Request a Service",
                    "description": "Download our app and create a service request. Specify your needs, location, and preferred time. Our system will match you with qualified technicians in your area."
                },
                "chooseTechnician": {
                    "title": "Choose Your Technician",
                    "description": "Review profiles of available technicians, including their ratings, experience, and previous work. Select the professional that best matches your requirements."
                },
                "getJobDone": {
                    "title": "Get the Job Done",
                    "description": "Your chosen technician will arrive at the scheduled time. They'll complete the work professionally and ensure your complete satisfaction with the service."
                },
                "rateReview": {
                    "title": "Rate and Review",
                    "description": "After the service is completed, rate your experience and leave a review. Your feedback helps maintain quality standards and assists other users in making informed decisions."
                }
            }
        },
        "about": {
            "title": "About ServiceKit",
            "subtitle": "Connecting skilled professionals with those who need them",
            "mission": {
                "title": "Our Mission",
                "description": "To revolutionize the service industry by creating a seamless platform that connects skilled professionals with clients, ensuring quality service delivery and professional growth."
            },
            "vision": {
                "title": "Our Vision",
                "description": "To become the world's most trusted platform for professional services, empowering technicians and delighting customers through innovation and excellence."
            },
            "team": {
                "title": "Our Leadership Team",
                "members": {
                    "ceo": {
                        "name": "Mohamed Soliman",
                        "role": "CEO & Founder",
                        "bio": "With extensive experience in the service industry, Soliman leads our company with vision and innovation."
                    },
                    "cto": {
                        "name": "Mohamed El-Bagoury",
                        "role": "CTO",
                        "bio": "El-Bagoury ensures smooth operations and maintains the highest standards of service quality."
                    },
                    "operations": {
                        "name": "Shahd Yassin",
                        "role": "Head of Operations",
                        "bio": "Shahd brings technical expertise and innovation to drive our platform's development and growth."
                    }
                }
            }
        }
    },
    "ar": {
        "nav": {
            "services": "الخدمات",
            "howItWorks": "كيف يعمل",
            "courses": "الدورات",
            "about": "من نحن"
        },
        "hero": {
            "title": "تواصل مع الفنيين المحترفين",
            "subtitle": "ابحث عن محترفين مهرة لجميع احتياجاتك",
            "findProfessional": "ابحث عن محترف",
            "becomeTechnician": "كن فنيًا"
        },
        "services": {
            "title": "خدماتنا",
            "subtitle": "خدمات احترافية لجميع احتياجاتك",
            "carpentry": {
                "title": "النجارة",
                "description": "خدمات النجارة وصناعة الأثاث الاحترافية",
                "features": [
                    "تصميم أثاث مخصص",
                    "إصلاح وترميم الخشب",
                    "خدمات التركيب"
                ]
            },
            "plumbing": {
                "title": "السباكة",
                "description": "خدمات السباكة وتركيب الأنابيب الاحترافية",
                "features": [
                    "تركيب وإصلاح الأنابيب",
                    "تنظيف المصارف",
                    "خدمات سخانات المياه"
                ]
            },
            "electrical": {
                "title": "الكهرباء",
                "description": "خدمات كهربائية آمنة وموثوقة",
                "features": [
                    "إصلاحات كهربائية",
                    "خدمات التركيب",
                    "فحوصات السلامة"
                ]
            },
            "mechanical": {
                "title": "ميكانيكي",
                "description": "خدمات إصلاح وصيانة ميكانيكية دقيقة",
                "features": [
                    "صيانة المعدات",
                    "خدمات الإصلاح",
                    "دعم التركيب"
                ]
            }
        },
        "app": {
            "android": "أندرويد",
            "ios": "آي أو إس"
        },
        "courses": {
            "title": "الدورات المهنية",
            "subtitle": "طور مهاراتك مع برامجنا التدريبية بقيادة الخبراء",
            "levels": {
                "beginner": "مبتدئ",
                "intermediate": "متوسط",
                "advanced": "متقدم",
                "expert": "خبير"
            },
            "details": {
                "weeks": " أسابيع",
                "students": " طالب"
            },
            "enroll": "سجل الآن",
            "items": {
                "carpentry": {
                    "title": "النجارة الحديثة",
                    "description": "تعلم مهارات وتقنيات النجارة الأساسية لإنشاء قطع جميلة وعملية."
                },
                "plumbing": {
                    "title": "السباكة الاحترافية",
                    "description": "أتقن تقنيات تركيب وإصلاح وصيانة السباكة للمباني السكنية والتجارية."
                },
                "electrical": {
                    "title": "الأنظمة الكهربائية",
                    "description": "تدريب شامل على التركيبات الكهربائية وبروتوكولات السلامة وصيانة النظام."
                },
                "mechanical": {
                    "title": "الهندسة الميكانيكية",
                    "description": "تدريب متقدم على الأنظمة الميكانيكية وصيانة المعدات والتطبيقات الصناعية."
                }
            },
            "modal": {
                "title": "حمل تطبيقنا",
                "subtitle": "احصل على جميع الدورات أثناء التنقل",
                "android": {
                    "small": "احصل عليه على",
                    "large": "جوجل بلاي"
                },
                "ios": {
                    "small": "حمله من",
                    "large": "آب ستور"
                }
            }
        },
        "howItWorks": {
            "title": "كيف يعمل",
            "subtitle": "خطوات بسيطة للحصول على الخدمة التي تحتاجها",
            "steps": {
                "requestService": {
                    "title": "طلب خدمة",
                    "description": "قم بتحميل تطبيقنا وإنشاء طلب خدمة. حدد احتياجاتك وموقعك والوقت المناسب لك. سيقوم نظامنا بتوصيلك مع الفنيين المؤهلين في منطقتك."
                },
                "chooseTechnician": {
                    "title": "اختيار الفني",
                    "description": "استعرض ملفات الفنيين المتاحين، بما في ذلك تقييماتهم وخبراتهم وأعمالهم السابقة. اختر المحترف الذي يناسب متطلباتك بشكل أفضل."
                },
                "getJobDone": {
                    "title": "إتمام العمل",
                    "description": "سيصل الفني الذي اخترته في الموعد المحدد. سيقوم بإنجاز العمل باحترافية وضمان رضاك التام عن الخدمة."
                },
                "rateReview": {
                    "title": "التقييم والمراجعة",
                    "description": "بعد اكتمال الخدمة، قم بتقييم تجربتك وكتابة مراجعة. تساعد ملاحظاتك في الحفاظ على معايير الجودة ومساعدة المستخدمين الآخرين في اتخاذ قرارات مدروسة."
                }
            }
        },
        "about": {
            "title": "عن سيرفس كيت",
            "subtitle": "نربط المحترفين المهرة مع من يحتاجون إليهم",
            "mission": {
                "title": "مهمتنا",
                "description": "إحداث ثورة في قطاع الخدمات من خلال إنشاء منصة سلسة تربط المحترفين المهرة بالعملاء، مما يضمن تقديم خدمة عالية الجودة والنمو المهني."
            },
            "vision": {
                "title": "رؤيتنا",
                "description": "أن نصبح المنصة الأكثر موثوقية في العالم للخدمات المهنية، من خلال تمكين الفنيين وإسعاد العملاء عبر الابتكار والتميز."
            },
            "team": {
                "title": "فريق القيادة",
                "members": {
                    "ceo": {
                        "name": "محمد سليمان",
                        "role": "الرئيس التنفيذي والمؤسس",
                        "bio": "مع خبرة واسعة في مجال الخدمات، يقود سليمان شركتنا برؤية وابتكار."
                    },
                    "cto": {
                        "name": "محمد الباجوري",
                        "role": "رئيس القسم التقني",
                        "bio": "يضمن الباجوري سلاسة العمليات والحفاظ على أعلى معايير جودة الخدمة."
                    },
                    "operations": {
                        "name": "شهد ياسين",
                        "role": "رئيسة العمليات",
                        "bio": "تجلب شهد الخبرة التقنية والابتكار لدفع تطوير منصتنا ونموها."
                    }
                }
            }
        }
    }
};

// تعريف المتغير العالمي
window.currentLang = localStorage.getItem('selectedLanguage') || 'en';

async function loadTranslations() {
    try {
        // استخدام الترجمات المعرفة مباشرة في الملف
        return translations;
    } catch (error) {
        console.error('Error loading translations:', error);
        return null;
    }
}

function updateDirection(lang) {
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.lang = lang;
}

function updateLogo() {
    const logos = document.querySelectorAll('.logo, .sidebar__logo');
    logos.forEach(logo => {
        logo.innerHTML = 'Service<span>Kit</span>';
    });
}

function updateNavigation(lang) {
    // Update main navigation
    const mainNavLinks = document.querySelectorAll('.main-nav .nav-link');
    const services = ['services', 'howItWorks', 'courses', 'about'];
    
    mainNavLinks.forEach((link, index) => {
        const key = services[index];
        if (translations && translations[lang] && translations[lang].nav[key]) {
            link.textContent = translations[lang].nav[key];
        }
    });

    // Update sidebar navigation
    const sidebarNavLinks = document.querySelectorAll('.sidebar__nav-link');
    const icons = ['fa-tools', 'fa-info-circle', 'fa-graduation-cap', 'fa-users'];
    
    sidebarNavLinks.forEach((link, index) => {
        const key = services[index];
        if (translations && translations[lang] && translations[lang].nav[key]) {
            link.innerHTML = `<i class="fas ${icons[index]}"></i> ${translations[lang].nav[key]}`;
        }
    });
}

function updateHero(lang) {
    const title = document.querySelector('.title');
    const subtitle = document.querySelector('.subtitle');
    
    if (title) title.textContent = translations[lang].hero.title;
    if (subtitle) subtitle.textContent = translations[lang].hero.subtitle;
}

function updateServiceCards(lang) {
    const services = ['carpentry', 'plumbing', 'electrical', 'mechanical'];
    const cards = document.querySelectorAll('.service-card');
    
    cards.forEach((card, index) => {
        const service = services[index];
        const title = card.querySelector('h3');
        const description = card.querySelector('p');
        
        if (title) title.textContent = translations[lang].services[service].title;
        if (description) description.textContent = translations[lang].services[service].description;
    });

    // Update service items in services page
    const serviceItems = document.querySelectorAll('.service-item');
    serviceItems.forEach((item, index) => {
        const service = services[index];
        const title = item.querySelector('.service-title');
        const description = item.querySelector('.service-description');
        
        if (title) title.textContent = translations[lang].services[service].title;
        if (description) description.textContent = translations[lang].services[service].description;
    });

    // Update course cards in courses page
    const courseCards = document.querySelectorAll('.course-card');
    courseCards.forEach((card, index) => {
        const service = services[index];
        const title = card.querySelector('.course-title');
        
        if (title) title.textContent = translations[lang].services[service].title;
    });
}

function updateAppButtons(lang) {
    const appButtons = document.querySelectorAll('.app-btn');
    
    appButtons.forEach(btn => {
        const isAndroid = btn.classList.contains('android-btn');
        const key = isAndroid ? 'android' : 'ios';
        btn.innerHTML = `<i class="fab fa-${isAndroid ? 'android' : 'apple'}"></i> ${translations[lang].app[key]}`;
    });
}

function updateHowItWorks(lang) {
    const title = document.querySelector('.how-it-works-hero .title');
    const subtitle = document.querySelector('.how-it-works-hero .subtitle');
    
    if (title) title.textContent = translations[lang].howItWorks.title;
    if (subtitle) subtitle.textContent = translations[lang].howItWorks.subtitle;

    // Update steps
    const steps = document.querySelectorAll('.step');
    const stepKeys = ['requestService', 'chooseTechnician', 'getJobDone', 'rateReview'];
    
    steps.forEach((step, index) => {
        const key = stepKeys[index];
        const stepTitle = step.querySelector('.step-title');
        const stepDescription = step.querySelector('.step-description');
        
        if (stepTitle) stepTitle.textContent = translations[lang].howItWorks.steps[key].title;
        if (stepDescription) stepDescription.textContent = translations[lang].howItWorks.steps[key].description;
    });
}

function updateAbout(lang) {
    const title = document.querySelector('.about-hero .title');
    const subtitle = document.querySelector('.about-hero .subtitle');
    
    if (title) title.textContent = translations[lang].about.title;
    if (subtitle) subtitle.textContent = translations[lang].about.subtitle;

    // Update Mission & Vision
    const missionTitle = document.querySelector('.mission-card h3');
    const missionDesc = document.querySelector('.mission-card p');
    const visionTitle = document.querySelector('.vision-card h3');
    const visionDesc = document.querySelector('.vision-card p');

    if (missionTitle) missionTitle.textContent = translations[lang].about.mission.title;
    if (missionDesc) missionDesc.textContent = translations[lang].about.mission.description;
    if (visionTitle) visionTitle.textContent = translations[lang].about.vision.title;
    if (visionDesc) visionDesc.textContent = translations[lang].about.vision.description;

    // Update Team Section
    const teamTitle = document.querySelector('.section-title');
    if (teamTitle) teamTitle.textContent = translations[lang].about.team.title;

    // Update Team Members
    const teamMembers = document.querySelectorAll('.team-member');
    const memberKeys = ['ceo', 'cto', 'operations'];
    
    teamMembers.forEach((member, index) => {
        const key = memberKeys[index];
        const memberName = member.querySelector('.member-name');
        const memberRole = member.querySelector('.member-role');
        const memberBio = member.querySelector('.member-bio');
        
        if (memberName) memberName.textContent = translations[lang].about.team.members[key].name;
        if (memberRole) memberRole.textContent = translations[lang].about.team.members[key].role;
        if (memberBio) memberBio.textContent = translations[lang].about.team.members[key].bio;
    });
}

function updateServices(lang) {
    // Update title and subtitle
    const title = document.querySelector('.services-hero .title');
    const subtitle = document.querySelector('.services-hero .subtitle');
    if (title) title.textContent = translations[lang].services.title;
    if (subtitle) subtitle.textContent = translations[lang].services.subtitle;

    // Update service items
    const serviceItems = document.querySelectorAll('.service-item');
    const serviceTypes = ['carpentry', 'plumbing', 'electrical', 'mechanical'];
    
    serviceItems.forEach((item, index) => {
        const type = serviceTypes[index];
        const serviceData = translations[lang].services[type];
        
        // Update title and description
        const title = item.querySelector('.service-title');
        const description = item.querySelector('.service-description');
        if (title) title.textContent = serviceData.title;
        if (description) description.textContent = serviceData.description;

        // Update features
        const features = item.querySelectorAll('.service-features li');
        features.forEach((feature, fIndex) => {
            feature.textContent = serviceData.features[fIndex];
        });
    });
}

function updateCourses(lang) {
    // Update title and subtitle
    const title = document.querySelector('.courses-hero .title');
    const subtitle = document.querySelector('.courses-hero .subtitle');
    if (title) title.textContent = translations[lang].courses.title;
    if (subtitle) subtitle.textContent = translations[lang].courses.subtitle;

    // Update course cards
    const courseCards = document.querySelectorAll('.course-card');
    const courseTypes = ['carpentry', 'plumbing', 'electrical', 'mechanical'];
    const levels = ['beginner', 'intermediate', 'advanced', 'expert'];
    
    courseCards.forEach((card, index) => {
        const type = courseTypes[index];
        const courseData = translations[lang].courses.items[type];
        
        // Update level
        const level = card.querySelector('.course-level');
        if (level) level.textContent = translations[lang].courses.levels[levels[index]];

        // Update title and description
        const title = card.querySelector('.course-title');
        const description = card.querySelector('.course-description');
        if (title) title.textContent = courseData.title;
        if (description) description.textContent = courseData.description;

        // Update course details
        const details = card.querySelectorAll('.course-detail span');
        if (details[0]) details[0].textContent = details[0].textContent.replace(/\d+/, '') + translations[lang].courses.details.weeks;
        if (details[1]) details[1].textContent = details[1].textContent.replace(/\d+/, '') + translations[lang].courses.details.students;

        // Update enroll button
        const enrollBtn = card.querySelector('.course-cta');
        if (enrollBtn) enrollBtn.textContent = translations[lang].courses.enroll;
    });

    // Update modal content if it exists
    const modal = document.getElementById('downloadModal');
    if (modal) {
        const modalTitle = modal.querySelector('.modal-header h2');
        const modalSubtitle = modal.querySelector('.modal-header p');
        const androidBtn = modal.querySelector('.android-btn .btn-text');
        const iosBtn = modal.querySelector('.ios-btn .btn-text');

        if (modalTitle) modalTitle.textContent = translations[lang].courses.modal.title;
        if (modalSubtitle) modalSubtitle.textContent = translations[lang].courses.modal.subtitle;
        
        if (androidBtn) {
            androidBtn.querySelector('.small-text').textContent = translations[lang].courses.modal.android.small;
            androidBtn.querySelector('.large-text').textContent = translations[lang].courses.modal.android.large;
        }
        
        if (iosBtn) {
            iosBtn.querySelector('.small-text').textContent = translations[lang].courses.modal.ios.small;
            iosBtn.querySelector('.large-text').textContent = translations[lang].courses.modal.ios.large;
        }
    }
}

async function switchLanguage(lang) {
    await loadTranslations();
    
    updateDirection(lang);
    updateLogo();
    updateNavigation(lang);
    updateHero(lang);
    updateServiceCards(lang);
    updateAppButtons(lang);
    updateHowItWorks(lang);
    updateAbout(lang);
    updateServices(lang);
    updateCourses(lang);
    
    // Update active state of language buttons
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });

    // Dispatch language changed event
    document.dispatchEvent(new Event('languageChanged'));
}

// Initialize translations and set initial language
document.addEventListener('DOMContentLoaded', async () => {
    await loadTranslations();
    switchLanguage(window.currentLang);
}); 
